<app-letter-modal *ngIf="showLetterModal" (close)="showLetterModal = false">
</app-letter-modal>
<!-- <app-lc-extension></app-lc-extension>  -->
<!-- <app-cad-extension *ngIf="cadExtensionshow" (close)="cadExtensionshow = false"></app-cad-extension>
<app-lc-open *ngIf="lcOpenshow" (close)="lcOpenshow = false"></app-lc-open>
<app-release-performance *ngIf="releasePerformance" (close)="releasePerformance = false"></app-release-performance> -->





<h6 class="blink text-center " *ngIf="purchaseOrderID.length==0">
    {{n}} PLEASE SELECT PO TO DISPLAY PURCHASE ORDER EVENTS
</h6>

<h6 class="blink text-center " *ngIf="showError && purchaseOrderID.length > 0">
    NETWORK ERROR. PLEASE TRY AGAIN.
</h6>


<!-- 
<a id="showDialog" style="visibility:hidden" data-target="#lcopen" data-toggle="modal">
</a>
<a id="showDialogLCExtension" style="visibility:hidden" data-target="#lcextension" data-toggle="modal">
</a>
<a id="showDialogCadExtension" style="visibility:hidden" data-target="#cadextension" data-toggle="modal">
</a>
<a id="showDialogReleasePerformance" style="visibility:hidden" data-target="#release" data-toggle="modal">
</a> -->
<!-- mdal for lc open and cad -->

<!-- end of lc open and cad -->

<!-- lc extension modal -->

<!-- end of  lc extension modal -->

<!-- start cad extension modal -->


<!-- end cad extension modal -->
<!-- 
<div data-backdrop="static" class="modal fade letterModal-modal-lg" id="letterModal" tabindex="-1" role="dialog"
    aria-labelledby="letterModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
        <div class="modal-content">
            <div id="mheader" class="modal-header" style="background-color:#0C7489; color: white">

                <h5 class="modal-title" id="exampleModalLabel">Letter Preview</h5>

                <button style="color:white" type="button" class="close" data-dismiss="modal">
                    <span class="text-black" aria-hidden="true">Ã—</span>
                </button>
            </div>

            <div *ngIf="!iframeShow" class="modal-body">
                <h6>{{lettername}}</h6>

                <div class="lds-css ng-scope">
                    <div class="mx-auto lds-facebook">
                        <div></div>
                        <div></div>
                        <div></div>
                    </div>
                </div>

            </div>

            <div *ngIf="iframeShow" class="modal-body row">
                <h6>{{lettername}}</h6>

                 <iframe style="height:400px;" class="e2e-iframe-trusted-src col-md-12" [src]="iframeUrl">
            </iframe> 
                <iframe style="height:75%;" class="e2e-iframe-trusted-src col-md-12" [src]="content">
                </iframe>
            </div>
            <div class="modal-footer">
                <div *ngIf="RPBND">
                    <div class="lds-css ng-scope">
                        <div class="mx-auto lds-loaderbook">
                            <div></div>
                            <div></div>
                            <div></div>
                        </div>
                    </div>
                </div>
                <button style="background-color:#0C7489; color: white" type="button" class="btn btn-sm"
                    (click)="downloadLetter()">
                    <i class="fa fa-2x fa-download" aria-hidden="true"></i>
                </button>
            </div>

        </div>
    </div>
</div> -->

<!-- start of Release performance bond -->
<!-- /end of release performance bond -->

<!-- start table Card -->
<div style="margin-bottom:2%" *ngIf="!loadingT && !showError">
        <span style="font-size:1.4em; color:#0C7489">{{eventName}}</span>
        
            <span *ngIf="reset" style=" margin-left:20px; color:black; cursor: pointer" (click)="ReturnPOEvents()"> <img src="https://img.icons8.com/small/32/000000/return.png"></span>
        
    </div>
<div *ngIf="purchaseOrderID.length>0" class="card">
    
       
    
    <div class="card-content">
        <div *ngIf="loadingT">
            <div class="mx-auto text-center lds-css ng-scope">
                <div class="mx-auto lds-facebook">
                    <div></div>
                    <div></div>
                    <div></div>
                </div>
                Loading ...
            </div>
        </div>
    



       

        <table *ngIf="!loadingT && !showError" class="table table-striped table-hover">

            <thead class="thead-bg-secondary">
                <th class="events-table-th">Event Description</th>
                <th class="events-table-th">Letter Number</th>
                <th class="events-table-th">Event Date</th>
                <th class="events-table-th"></th>
                <th class="events-table-th">Actions</th>
                <th></th>
            </thead>
            <tbody>
                <tr *ngFor="let i of selectedPO">

                    <td id="name" class="events-table-td">
                        {{i.name}}
                    </td>

                    <td class="events-table-td">
                        <div *ngIf="i.id != eventBeingEdited">
                            <span style="font-size:1.2em" id="name">{{i.letterNumber}}</span>
                        </div>
                        <div class="form-group" *ngIf="i.id == eventBeingEdited">
                            <input type="text" [(ngModel)]="i.letterNumber" class="form-control form-control-sm"
                                placeholder="Letter Number">
                        </div>
                    </td>
                    <td class="events-table-td">
                        <div *ngIf="i.id != eventBeingEdited">
                            <span style="font-size:1.2em" id="name">{{i.eventDate | date: 'mediumDate'}}</span>
                        </div>
                        <div *ngIf="i.id == eventBeingEdited">
                            <div class="form-group">
                                <div class="input-group">
                                    <input required class="form-control form-control-sm" placeholder="yyyy-mm-dd"
                                        name="dp" [(ngModel)]="model" ngbDatepicker #d="ngbDatepicker">
                                    <div class="input-group-append">
                                        <button class="btn btn-outline-secondary calendar" (click)="d.toggle()"
                                            type="button"></button>
                                    </div>
                                </div>
                                <small class="form-text text-danger">{{message}}</small>

                            </div>

                        </div>
                    </td>
                    <td id="name" class="events-table-td" *ngIf="i.isLetterRequired">
                        <button style="background-color:#0C7489; color: white" type="button" class="btn  btn-sm"
                            data-toggle="modal" id="generate" data-target="#exampleModal" (click)="showModal(i)">
                            Generate
                            Letter
                        </button>
                    </td>
                    <td class="events-table-td" *ngIf="!i.isLetterRequired"></td>
                    <td>
                        <a id="myBtn" (click)="editEvent(i)">
                            <i id="ico" class="fa fa-lg fa-edit"></i>
                        </a>
                    </td>
                    <td>

                        <a id="myBtn" *ngIf="i.id == eventBeingEdited" (click)="saveEvent(i)">
                            <i id="ico1" class="fa fa-lg fa-save"></i>
                        </a>
                    </td>

                    <td>
                        <a id="myBtn" *ngIf="i.id == eventBeingEdited" (click)="cancelEvent(i)">
                            <i id="ico2" class="fa fa-lg fa-remove"></i>
                        </a>
                    </td>

                </tr>

            </tbody>
        </table>

    </div>
</div>